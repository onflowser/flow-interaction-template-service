{
    "f_type": "InteractionTemplate",
    "f_version": "1.0.0",
    "id": "572c5903ad7683b8e7dd9d1bba89102cdc35c177bf29eb9d3aab29918a872ff1",
    "data": {
        "type": "InteractionTemplate",
        "interface": "",
        "messages": {
            "title": {
                "i18n": {
                    "en-US": "BltStaking Stake new blt"
                }
            },
            "description": {
                "i18n": {
                    "en-US": "Request to stake: {amount} BLT",
                    "zh-CN": "请求质押: {amount} BLT 代币",
                    "zh-TW": "請求質押: {amount} BLT 代幣"
                }
            }
        },
        "cadence": "import BloctoToken from 0xBLOCTO_TOKEN_ADDRESS\nimport BloctoPass from 0xBLOCTO_PASS_ADDRESS\n\ntransaction(amount: UFix64, index: Int) {\n\n  // The Vault resource that holds the tokens that are being transferred\n  let vaultRef: &BloctoToken.Vault\n\n  // The private reference to user's BloctoPass\n  let bloctoPassRef: &BloctoPass.NFT\n\n  prepare(account: AuthAccount) {\n    // Get a reference to the account's stored vault\n    self.vaultRef = account.borrow<&BloctoToken.Vault>(from: BloctoToken.TokenStoragePath)\n      ?? panic(\"Could not borrow reference to the owner's Vault!\")\n\n    // Get a reference to the account's BloctoPass\n    let bloctoPassCollectionRef = account.borrow<&BloctoPass.Collection>(from: /storage/bloctoPassCollection)\n      ?? panic(\"Could not borrow reference to the owner's BloctoPass collection!\")\n\n    let ids = bloctoPassCollectionRef.getIDs()\n\n    // Get a reference to the BloctoPass\n    self.bloctoPassRef = bloctoPassCollectionRef.borrowBloctoPassPrivate(id: ids[index])\n  }\n\n  execute {\n    let lockedBalance = self.bloctoPassRef.getIdleBalance()\n\n    if amount <= lockedBalance {\n      self.bloctoPassRef.stakeNewTokens(amount: amount)\n    } else if ((amount - lockedBalance) <= self.vaultRef.balance) {\n      self.bloctoPassRef.deposit(from: <-self.vaultRef.withdraw(amount: amount - lockedBalance))\n      self.bloctoPassRef.stakeNewTokens(amount: amount)\n    } else {\n      panic(\"Not enough tokens to stake!\")\n    }\n  }\n}",
        "dependencies": {
            "0xBLOCTO_TOKEN_ADDRESS": {
                "BloctoToken": {
                    "testnet": {
                        "address": "0x6e0797ac987005f5",
                        "contract": "BloctoToken",
                        "fq_address": "A.0x6e0797ac987005f5.BloctoToken",
                        "pin": "0326c320322c4e8dde768ba2975c384184fb7e41765c2c87e79a2040bfc71be8",
                        "pin_block_height": 139076432
                    }
                }
            },
            "0xBLOCTO_PASS_ADDRESS": {
                "BloctoPass": {
                    "testnet": {
                        "address": "0x7deafdfc288e422d",
                        "contract": "BloctoPass",
                        "fq_address": "A.0x7deafdfc288e422d.BloctoPass",
                        "pin": "3c7796c792dc130c2e565c8246de8a8d5add43e7f340efe20c52568c43602b36",
                        "pin_block_height": 139076585
                    }
                }
            }
        },
        "arguments": {
            "amount": {
                "index": 0,
                "type": "UFix64",
                "messages": {}
            },
            "index": {
                "index": 1,
                "type": "Int",
                "messages": {}
            }
        }
    }
}